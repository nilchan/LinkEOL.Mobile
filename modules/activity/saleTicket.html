<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>乐评家</title>
		<link href="../../content/mui/mui.min.css" rel="stylesheet" />
		<link href="../../content/fonts/iconfont.css" rel="stylesheet" />
		<link href="../../content/common/global.css" rel="stylesheet" />
		<link href="../../content/common/style.css" rel="stylesheet" />
		<style>
			.mui-input-group:before {
				background: none;
			}
			
			.saleTicket-btn-default {
				background:#a9a9a9;
				color: write;
			}
			.mui-input-group .mui-input-row:after{
				background: #C8C7CC!important;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav addWorks-mui-bar-nav">
			<i class="iconfont mui-action-back">&#xe683;</i>
			<h1 class="mui-title" data-bind="text:paid ?'购票信息':'购票确认'"></h1>
		</header>
		<div class="mui-content">
			<div data-bind="template: {name:'ticketTemplate', foreach:custormPriceList }">
			</div>
			<script type="text/html" id="ticketTemplate">
				<div class="money-btn">
					<div class="money-btn-button">
						<!--ko text:SeatName-->
						<!--/ko-->/￥
						<!--ko text:SeatPrice-->
						<!--/ko-->
					</div>
					<span data-bind="visible: ViewOrder()==false">余票<!--ko text:(SeatRemain-BuySeatNum)--><!--/ko-->张</span>
					<div class="number-div">
						<div class="mui-numbox number-mui-div" data-numbox-min='1'>
							<button class="mui-btn mui-numbox-btn-minus" type="button" data-bind="click:sub">-</button>
							<input class="mui-numbox-input" type="number" data-bind="value:BuySeatNum,event:{blur:checkTicket},enable:ViewOrder()==false" />
							<button class="mui-btn mui-numbox-btn-plus" type="button" data-bind="click:add">+</button>
						</div>
					</div>
				</div>
			</script>

			<div class="showSet-btn">
				<div data-bind="visible: ViewOrder()==true && paid()==false">支付剩余时间：
					<!--ko text: payRemainTime-->
					<!--/ko-->
				</div>
				<button data-bind="click:gotoShowset">座位示意图</button>
			</div>

			<div id="middlePopover" class="mui-popover submitComment-top">
				<div class="mui-scroll-wrapper">
					<div class="mui-scroll submitClass-mui-scroll Lesson-mui">
						<div class="mui-scroll-title">
							<i class="iconfont" data-bind="click:closePopover">&#xe63f;</i>
							<span>付款详情</span>
						</div>
						<ul>
							<form class="mui-input-group pay-no-before">
								<div class="mui-input-row mui-radio mui-left Lesson-radio">
									<label>
										<li class="wx-pay">
											<img src="../../images/submitClass-wx.png" />
											<span class="wx-pay-default">微信支付</span>
											<input name="payType" value="wxpay" type="radio" data-bind="event:{change: checkPayType}" checked="checked">
										</li>
									</label>
								</div>
								<div class="mui-input-row mui-radio mui-left Lesson-radio ">
									<label>
										<li class="wx-pay">
											<img src="../../images/ali.png" />
											<span class="wx-pay-default">支付宝</span>
											<input name="payType" value="alipay" type="radio" data-bind="event:{change: checkPayType}">
										</li>
									</label>
								</div>
								<div class="mui-input-row mui-radio mui-left Lesson-radio">
									<label>
										<li class="wx-pay">
											<img src="../../images/ye.png" />	
											<span class="wx-pay-span">余额支付
												<!--ko text: '( ￥ ' + balance() + ' )'-->
												(￥120.00)
												<!--/ko-->
											</span>
											<span class="wx-pay-favorable" data-bind="text: discountText">享受8.5折</span>
											<input name="payType" value="balance" type="radio" data-bind="event:{change: checkPayType}">
										</li>
									</label>
								</div>
								<div class="mui-input-row mui-radio mui-left Lesson-radio" data-bind="visible: regUsingFree() == true">
									<label>
										<li class="wx-pay">
											<img src="../../images/ye.png" />
											<span class="wx-pay-span">免费报名
												<!--ko text: '( 剩余' + freeActivityCount() + '次 )'-->
												( 剩余1次 )
												<!--/ko-->
											</span>
											<span class="wx-pay-favorable">会员独享</span>
											<input name="payType" value="free" type="radio" data-bind="event:{change: checkPayType}, checked: PayType">
										</li>
									</label>
								</div>
								<li class="lineHeight">
									总额：
									<span class="lineHeight-span">
										￥<!--ko text: TotalAmountPay-->
										<!--/ko-->
										<span class="lineHeight-decoration" data-bind="visible: TotalAmount() != TotalAmountPay()">
											￥<!--ko text: TotalAmount-->
											<!--/ko-->
										</span>
									</span>
								</li>
							</form>
						</ul>
						<button class="p-btn-color" data-bind="event:{tap: gotoPay}">去付款</button>
					</div>
				</div>
			</div>

			<nav class="mui-bar mui-bar-tab" data-bind="visible:paid()==false">
				<a class="mui-tab-item works-list-mui-tab-btn"  data-bind="attr:{href:(isHaveTicket() ?'#middlePopover':'')}">
					<span class="mui-tab-label myAccount-mui-tab-label">
                		<button class="saleTicket-btn" data-bind="css:isHaveTicket() ? '':'saleTicket-btn-default'">确认</button>
                	</span>
				</a>
			</nav>

		</div>
		<script src="../../script/mui/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../script/libs/knockout/knockout-3.3.0.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../script/common/common.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../script/common/base.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../script/common/pay.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../script/activity/saleTicket.js" type="text/javascript" charset="utf-8"></script>
	</body>

</html>